$(function(){$("#private-quote-label, #edit-private-quote-label").tooltip(),$(".edit-quote, .delete-quote, .star-quote, .unstar-quote").tooltip(),jQuery.extend(jQuery.validator.messages,{required:"Veuillez renseigner ce champ.",email:"Veuillez saisir une adresse email valide."}),jQuery.validator.setDefaults({highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){a.insertAfter(b.parent(".input-group").length?b.parent():b)}}),$("#register").validate(),$("#login").validate(),$("#add").validate(),$(".pagination .first a").html("«"),$(".pagination .prev a").html("‹"),$(".pagination .next a").html("›"),$(".pagination .last a").html("»"),$(".delete-quote").on("click",function(){return $("#quote-to-delete").val($(this).attr("data-id")),$("#deleteQuoteModal").modal("show"),!1}),$("#delete").on("submit",function(){return $.ajax({url:"/quote/"+$("#quote-to-delete").val(),method:"delete"}).done(function(){window.location.href="/"}).fail(function(){alert("Erreur lors de la suppression.")}),!1}),$("#add-quote").on("click",function(){return $("#addQuoteModal").modal("show"),!1}),$("#author").selectize({valueField:"_id",labelField:"name",searchField:"name",create:!0,maxItems:1,render:{option_create:function(a,b){return'<div class="create">Ajouter <strong>'+b(a.input)+"</strong>&hellip;</div>"}},load:function(a,b){return a.length?void $.ajax({url:"/author/find/"+encodeURIComponent(a),type:"GET",error:function(){b()},success:function(a){b(a.slice(0,10))}}):b()}}),$("#book").selectize({valueField:"_id",labelField:"name",searchField:"name",create:!0,maxItems:1,render:{option_create:function(a,b){return'<div class="create">Ajouter <strong>'+b(a.input)+"</strong>&hellip;</div>"}},load:function(a,b){return a.length?void $.ajax({url:"/book/find/author/"+$("#author").val()+"/book/"+encodeURIComponent(a),type:"GET",error:function(){b()},success:function(a){b(a.slice(0,10))}}):b()}}),$(".edit-quote").on("click",function(){return $("#quote-to-edit").val($(this).attr("data-id")),$("#quote-to-edit-author").val($(this).siblings(".author").find("a").html()),$("#quote-to-edit-book").val($(this).siblings(".book").find("a").html()),$("#quote-to-edit-quote").val($(this).parents(".quote").find(".text").html()),$("#quote-to-edit-hidden").prop("checked","true"==$(this).siblings(".hidden").val()),$("#editQuoteModal").modal("show"),!1}),$("#edit").on("submit",function(){return $.ajax({url:"/quote/"+$("#quote-to-edit").val(),method:"put",data:$(this).serialize()}).done(function(){window.location.reload()}).fail(function(){alert("Erreur lors de la modification.")}),!1}),$(".star-quote").on("click",function(){var a=$(this);return $.ajax({url:$(this).attr("href"),method:"PUT"}).done(function(){a.removeClass("star-quote").addClass("unstar-quote").attr("href",a.attr("href").replace("star","unstar")).attr("title","Retirer des favoris")}),event.preventDefault(),!1}),$(".unstar-quote").on("click",function(){var a=$(this);return $.ajax({url:$(this).attr("href"),method:"PUT"}).done(function(){a.removeClass("unstar-quote").addClass("star-quote").attr("href",a.attr("href").replace("unstar","star")).attr("title","Ajouter aux favoris")}),event.preventDefault(),!1}),$("#login-link").on("click",function(){return $("#loginModal").modal("show"),!1}),$("#login").on("submit",function(){return $(this).valid()&&$.ajax({url:"/login",method:"post",data:$(this).serialize()}).done(function(){window.location.reload()}).fail(function(){alert("Erreur lors de la connexion.")}),!1}),$("#register-link").on("click",function(){return $("#registerModal").modal("show"),!1}),$("#register").on("submit",function(){}),$(".edit-author").on("click",function(){return $("#author-to-edit").val($(this).attr("data-id")),$("#author-to-edit-author").val($(this).attr("data-value")),$("#editAuthorModal").modal("show"),!1}),$(".edit-book").on("click",function(){return $("#book-to-edit").val($(this).attr("data-id")),$("#book-to-edit-book").val($(this).attr("data-value")),$("#editBookModal").modal("show"),!1})});